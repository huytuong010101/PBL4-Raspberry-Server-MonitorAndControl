<!DOCTYPE html>
<html>
    <head>
        <title>Raspberry server</title>
        <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
              rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
              crossorigin="anonymous">
        <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
        <style>
            .progress {
                margin: 20px;
                width: 200px;
                height: 200px;
                position: relative;
                display: inline-block;
                font-size: 2rem;
            }
        </style>
    </head>
    <body>
        <section class="container text-center">
            <div class="alert alert-primary" role="alert">
                RASPBERRY RESOURCE
            </div>
            <div id="cpu-progress" class="progress"></div>
            <div id="ram-progress" class="progress"></div>
            <div id="disk-progress" class="progress"></div>
            <div id="network-progress" class="progress"></div>
        </section>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        </script>
        <script src="https://rawgit.com/kimmobrunfeldt/progressbar.js/1.0.0/dist/progressbar.js">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
                integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
                crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
                integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
                crossorigin="anonymous">
        </script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
        <script>
            const cpu = new ProgressBar.Circle("#cpu-progress", {
                color: '#eea5cd',
                strokeWidth: 3,
            });
            const ram = new ProgressBar.Circle("#ram-progress", {
                color: '#91dd1a',
                strokeWidth: 3,
            });
            const disk = new ProgressBar.Circle("#disk-progress", {
                color: '#190ff8',
                strokeWidth: 3,
            });
            const network = new ProgressBar.Circle("#network-progress", {
                 color: '#4f37a1',
                 strokeWidth: 3,
            });
        </script>
        <script>
            const ws = new WebSocket("ws://" + location.hostname + ":8000/resource");
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data)
                data.cpu += 5
                cpu.set(data.cpu / 100)
                cpu.setText("CPU\n" + data.cpu + "%")
                ram.set(data.ram / 100)
                ram.setText("RAM\n" + data.ram + "%")
                network.set(100)
                network.setText("SEND\n" + data.network)
                disk.set(data.disk / 100)
                disk.setText("DISK\n" + data.disk + "%")
            };
            ws.onclose = () => {
                toastr.error("Disconnected to websocket")
            }
        </script>

    </body>
</html>